{"version":3,"sources":["components/stepButton/index.jsx","components/track/index.jsx","utils/index.js","utils/data.js","utils/audio/tones.js","utils/audio/index.js","components/controller/index.jsx","App.js","index.js"],"names":["StepButton","toggleOn","props","toggleStepState","step","on","this","isOn","className","playing","onClick","React","Component","Track","i","a","sequence","pos","updatedSequence","playEffect","toggleSequence","player","name","play","prev","Number","isInteger","isPlaying","steps","playingClassname","push","key","renderStepButtons","stepPerMs","bpm","deepClone","obj","JSON","parse","stringify","NOTES","SEQUENCES","Array","fill","NOTES_TO_HZ","generateToneBuffer","hz","audioCtx","angularFreq","Math","PI","calcAngularFreq","buffer","createBuffer","SAMPLE_RATE","bufferArray","getChannelData","sampleNumber","sampleAngle","sample","sin","generateToneBuffers","buffersByTone","Object","entries","note","TonePlayer","AudioContext","tone","source","createBufferSource","gainNode","createGain","gain","setTargetAtTime","currentTime","connect","destination","start","Controller","interval","state","setState","stop","clearInterval","togglePlay","setInterval","updateBpm","value","target","oldInterval","isNaN","selectSequence","console","log","sequences","innerHTML","width","height","id","viewBox","xmlns","d","transform","map","renderPlayButton","renderSteps","renderTracks","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7f488772.chunk.js","sourcesContent":["import React from 'react'\nimport './styles.css'\n\nexport default class StepButton extends React.Component {\n  toggleOn = () => {\n    const { toggleStepState, step } = this.props\n    toggleStepState(step)\n  }\n\n  render() {\n    const on = this.props.isOn ? 'on' : ''\n    return <button className={`step-button ${this.props.playing} ${on}`} onClick={this.toggleOn}></button>\n  }\n}\n","import React from 'react'\nimport StepButton from '../stepButton'\nimport './styles.css'\n\nexport default class Track extends React.Component {\n  playEffect() {\n    const { player, name } = this.props\n    player.play(name)\n  }\n\n  componentDidUpdate(prev) {\n    if (Number.isInteger(prev.step) && prev.isPlaying) {\n      const { sequence } = this.props\n      if (sequence[prev.step]) {\n        this.playEffect()\n      }\n    }\n  }\n\n  toggleStepState = async (i) => {\n    const { sequence, pos } = this.props\n    const updatedSequence = [...sequence]\n    const isPlaying = !updatedSequence[i]\n    if (isPlaying) {\n      this.playEffect()\n    }\n    this.props.toggleSequence(pos, i)\n  }\n\n  renderStepButtons() {\n    const { step, sequence } = this.props\n    const steps = []\n    for (let i = 0; i < 16; i++) {\n      const playingClassname = step === i ? 'playing' : ''\n      steps.push(\n        <StepButton\n          key={i}\n          step={i}\n          isOn={sequence[i]}\n          playing={playingClassname}\n          toggleStepState={this.toggleStepState}\n        />\n      )\n    }\n    return steps\n  }\n\n  render() {\n    return (\n      <div className=\"track\">\n        <h3>{this.props.name}</h3>\n        <span className=\"step-buttons\">\n          {this.renderStepButtons()}\n        </span>\n      </div>\n    )\n  }\n}\n","export function stepPerMs(bpm = 128) {\n  return (((60 / bpm) * 4) / 16) * 1000\n}\n\nexport function deepClone(obj) {\n  return JSON.parse(JSON.stringify(obj))\n}\n","// export const TRACKS = ['Kick', 'Snare', 'Open Hat', 'Closed Hat']\n// export const SEQUENCES = {\n//   'Sequence 1': {\n//     Kick:         [false, true, false, false, true, true, false, true, false, false, false, false, true, false, true, false],\n//     Snare:        [true, true, false, true, false, true, false, true, false, true, false, true, false, true, true, false],\n//     'Open Hat':   [false, false, true, false, true, false, false, true, false, true, false, false, true, false, true, false],\n//     'Closed Hat': [true, false, false, true, false, false, true, true, false, false, false, true, false, false, false, true],\n//   },\n//   'Sequence 2': {\n//     Kick:         [false, true, false, false, true, true, false, true, false, false, false, true, true, false, true, false],\n//     Snare:        [false, false, false, true, false, true, false, true, false, true, false, true, false, true, true, false],\n//     'Open Hat':   [false, true, true, false, true, false, false, true, false, true, false, true, true, false, true, false],\n//     'Closed Hat': [true, false, false, true, true, false, true, true, false, false, false, true, false, false, false, true],\n//   },\n//   'Sequence 3': {\n//     Kick:         [true, true, false, false, true, false, true, true, false, false, false, true, true, false, true, false],\n//     Snare:        [true, true, false, true, false, true, false, true, false, false, true, true, false, true, true, false],\n//     'Open Hat':   [false, false, true, false, false, false, false, true, false, true, false, true, false, false, true, false],\n//     'Closed Hat': [false, false, false, true, true, false, true, true, false, false, true, false, true, false, false, true],\n//   },\n//   None: {\n//     Kick:         new Array(16).fill(false),\n//     Snare:        new Array(16).fill(false),\n//     'Open Hat':   new Array(16).fill(false),\n//     'Closed Hat': new Array(16).fill(false),\n//   }\n// }\nexport const NOTES = ['D5', 'C5', 'B4', 'A4', 'G4', 'F4', 'E4', 'D4', 'C4', 'B3', 'A3', 'G3', 'F3', 'E3', 'D3', 'C3']\nexport const SEQUENCES = [\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n  new Array(16).fill(false),\n]\n","export const NOTES_TO_HZ = {\n  'C0': 16.35,\n  'C#0': 17.32,\n  'Db0': 17.32,\n  'D0': 18.35,\n  'D#0': 19.45,\n  'Eb0': 19.45,\n  'E0': 20.60,\n  'F0': 21.83,\n  'F#0': 23.12,\n  'Gb0': 23.12,\n  'G0': 24.50,\n  'G#0': 25.96,\n  'Ab0': 25.96,\n  'A0': 27.50,\n  'A#0': 29.14,\n  'Bb0': 29.14,\n  'B0': 30.87,\n  'C1': 32.70,\n  'C#1': 34.65,\n  'Db1': 34.65,\n  'D1': 36.71,\n  'D#1': 38.89,\n  'Eb1': 38.89,\n  'E1': 41.20,\n  'F1': 43.65,\n  'F#1': 46.25,\n  'Gb1': 46.25,\n  'G1': 49.00,\n  'G#1': 51.91,\n  'Ab1': 51.91,\n  'A1': 55.00,\n  'A#1': 58.27,\n  'Bb1': 58.27,\n  'B1': 61.74,\n  'C2': 65.41,\n  'C#2': 69.30,\n  'Db2': 69.30,\n  'D2': 73.42,\n  'D#2': 77.78,\n  'Eb2': 77.78,\n  'E2': 82.41,\n  'F2': 87.31,\n  'F#2': 92.50,\n  'Gb2': 92.50,\n  'G2': 98.00,\n  'G#2': 103.83,\n  'Ab2': 103.83,\n  'A2': 110.00,\n  'A#2': 116.54,\n  'Bb2': 116.54,\n  'B2': 123.47,\n  'C3': 130.81,\n  'C#3': 138.59,\n  'Db3': 138.59,\n  'D3': 146.83,\n  'D#3': 155.56,\n  'Eb3': 155.56,\n  'E3': 164.81,\n  'F3': 174.61,\n  'F#3': 185.00,\n  'Gb3': 185.00,\n  'G3': 196.00,\n  'G#3': 207.65,\n  'Ab3': 207.65,\n  'A3': 220.00,\n  'A#3': 233.08,\n  'Bb3': 233.08,\n  'B3': 246.94,\n  'C4': 261.63,\n  'C#4': 277.18,\n  'Db4': 277.18,\n  'D4': 293.66,\n  'D#4': 311.13,\n  'Eb4': 311.13,\n  'E4': 329.63,\n  'F4': 349.23,\n  'F#4': 369.99,\n  'Gb4': 369.99,\n  'G4': 392.00,\n  'G#4': 415.30,\n  'Ab4': 415.30,\n  'A4': 440.00,\n  'A#4': 466.16,\n  'Bb4': 466.16,\n  'B4': 493.88,\n  'C5': 523.25,\n  'C#5': 554.37,\n  'Db5': 554.37,\n  'D5': 587.33,\n  'D#5': 622.25,\n  'Eb5': 622.25,\n  'E5': 659.26,\n  'F5': 698.46,\n  'F#5': 739.99,\n  'Gb5': 739.99,\n  'G5': 783.99,\n  'G#5': 830.61,\n  'Ab5': 830.61,\n  'A5': 880.00,\n  'A#5': 932.33,\n  'Bb5': 932.33,\n  'B5': 987.77,\n  'C6': 1046.50,\n  'C#6': 1108.73,\n  'Db6': 1108.73,\n  'D6': 1174.66,\n  'D#6': 1244.51,\n  'Eb6': 1244.51,\n  'E6': 1318.51,\n  'F6': 1396.91,\n  'F#6': 1479.98,\n  'Gb6': 1479.98,\n  'G6': 1567.98,\n  'G#6': 1661.22,\n  'Ab6': 1661.22,\n  'A6': 1760.00,\n  'A#6': 1864.66,\n  'Bb6': 1864.66,\n  'B6': 1975.53,\n  'C7': 2093.00,\n  'C#7': 2217.46,\n  'Db7': 2217.46,\n  'D7': 2349.32,\n  'D#7': 2489.02,\n  'Eb7': 2489.02,\n  'E7': 2637.02,\n  'F7': 2793.83,\n  'F#7': 2959.96,\n  'Gb7': 2959.96,\n  'G7': 3135.96,\n  'G#7': 3322.44,\n  'Ab7': 3322.44,\n  'A7': 3520.00,\n  'A#7': 3729.31,\n  'Bb7': 3729.31,\n  'B7': 3951.07,\n  'C8': 4186.01\n}\n","import { AudioContext } from 'standardized-audio-context'\nimport { NOTES_TO_HZ } from './tones'\n\nconst SAMPLE_RATE = 44100\nconst calcAngularFreq = (hz) => hz * 2 * Math.PI\n\nexport function generateToneBuffer({ hz, audioCtx }) {\n  const duration = SAMPLE_RATE * 1\n  const angularFreq = calcAngularFreq(hz)\n  const buffer = audioCtx.createBuffer(1, duration, SAMPLE_RATE)\n  const bufferArray = buffer.getChannelData(0)\n  for (let sampleNumber = 0; sampleNumber < duration; sampleNumber++) {\n    const sampleTime = sampleNumber / 44100\n    const sampleAngle = sampleTime * angularFreq\n    const sample = Math.sin(sampleAngle)\n    bufferArray[sampleNumber] = sample\n  }\n\n  return buffer\n}\n\nexport function generateToneBuffers(audioCtx) {\n  const buffersByTone = {}\n  for (let [note, hz] of Object.entries(NOTES_TO_HZ)) {\n    buffersByTone[note] = generateToneBuffer({ hz, audioCtx })\n  }\n  return buffersByTone\n}\n\nexport class TonePlayer {\n  constructor(audioCtx = new AudioContext()) {\n    this.audioCtx = audioCtx\n    this.buffersByTone = generateToneBuffers(audioCtx)\n  }\n\n  play(tone) {\n    const { audioCtx, buffersByTone } = this\n    const source = audioCtx.createBufferSource()\n    const gainNode = audioCtx.createGain()\n    gainNode.gain.setTargetAtTime(0, audioCtx.currentTime, 0)\n    source.buffer = buffersByTone[tone]\n    source.connect(gainNode)\n    gainNode.connect(audioCtx.destination)\n    source.start()\n    gainNode.gain.setTargetAtTime(1, audioCtx.currentTime, 0.05)\n    gainNode.gain.setTargetAtTime(0, audioCtx.currentTime + 0.25, 0.125)\n  }\n}\n","import { AudioContext } from 'standardized-audio-context'\nimport React from 'react'\nimport Track from '../track'\nimport { deepClone, stepPerMs } from '../../utils'\nimport { NOTES, SEQUENCES } from '../../utils/data'\nimport { TonePlayer } from '../../utils/audio'\nimport './styles.css'\n\nexport default class Controller extends React.Component {\n  constructor(props) {\n    super(props)\n    const audioCtx = new AudioContext()\n    const player = new TonePlayer(audioCtx)\n\n    this.state = {\n      bpm: 128,\n      step: null,\n      interval: null,\n      isPlaying: false,\n      audioCtx,\n      player,\n      sequences: [...deepClone(SEQUENCES)]\n    }\n  }\n\n  interval = () => {\n    const { step } = this.state\n    if (step === null || step === 15) {\n      this.setState({ step: 0 })\n    } else {\n      this.setState({ step: step + 1 })\n    }\n  }\n\n  stop = () => {\n    const { interval } = this.state\n    clearInterval(interval)\n    this.setState({ interval: null, isPlaying: false, step: null })\n  }\n\n  togglePlay = () => {\n    const { isPlaying, interval, bpm } = this.state\n    if (isPlaying) {\n      clearInterval(interval)\n      this.setState({ isPlaying: false, interval: null })\n    } else {\n      const interval = setInterval(this.interval, stepPerMs(bpm))\n      this.setState({ isPlaying: true, interval })\n    }\n  }\n\n  updateBpm = ({ target: { value }}) => {\n    const { interval: oldInterval, isPlaying } = this.state\n    if (isNaN(Number(value))) {\n      return\n    }\n    if (isPlaying) {\n      clearInterval(oldInterval)\n      const interval = setInterval(this.interval, stepPerMs(value))\n      this.setState({ interval, bpm: value })\n    } else {\n      this.setState({ bpm: value })\n    }\n  }\n\n  selectSequence = (name) => {\n    this.setState({ ...deepClone(SEQUENCES[name]) })\n  }\n\n  toggleSequence = (pos, i) => {\n    console.log({ pos, i })\n    const sequence = this.state.sequences[pos]\n    const step = sequence[i]\n    sequence[i] = !step\n    console.log({ i, pos, step })\n    this.setState({ sequences: this.state.sequences })\n  }\n\n  renderPlayButton() {\n    const { isPlaying } = this.state\n    const innerHTML = isPlaying ?\n      <svg width=\"15\" height=\"15\" id=\"Capa_1\"  viewBox=\"0 0 424.236 424.236\" xmlns=\"http://www.w3.org/2000/svg\"><path id=\"path-1_5_\" d=\"m247.471 0h176.765v424.236h-176.765z\" transform=\"translate(9 2)\"/><path id=\"path-1_4_\" d=\"m0 0h176.765v424.236h-176.765z\" transform=\"translate(2 2)\"/></svg> :\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 494.942 494.942\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m35.353 0 424.236 247.471-424.236 247.471z\"/></svg>\n    return <button className=\"play\" onClick={this.togglePlay}>{innerHTML}</button>\n  }\n\n  renderSteps() {\n    const { step } = this.state\n    const steps = []\n    for (let i = 0; i < 16; i++) {\n      const playingClassname = step === i ? 'playing' : ''\n      steps.push(<span key={i} className={`step ${playingClassname}`}>{i + 1}</span>)\n    }\n    return steps\n  }\n\n  renderTracks() {\n    const { step, isPlaying, sequences, player } = this.state\n    return sequences.map((sequence, i) => {\n      const note = NOTES[i]\n      return <Track\n        key={i}\n        pos={i}\n        name={note}\n        step={step}\n        player={player}\n        isPlaying={isPlaying}\n        sequence={sequence}\n        toggleSequence={this.toggleSequence}\n      />\n    })\n  }\n\nrender() {\n    return (\n      <div className=\"controller\">\n        <div className=\"header\">\n          <h1 className=\"title\">JS-Matrix</h1>\n          <span className=\"toolbar\">\n            <button className=\"stop\" onClick={this.stop}>\n              <svg width=\"15\" height=\"15\" id=\"Layer_1\" viewBox=\"0 0 506.1 506.1\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m489.609 0h-473.118c-9.108 0-16.491 7.383-16.491 16.491v473.118c0 9.107 7.383 16.491 16.491 16.491h473.119c9.107 0 16.49-7.383 16.49-16.491v-473.118c0-9.108-7.383-16.491-16.491-16.491z\"/></svg>\n            </button>\n            {this.renderPlayButton()}\n          </span>\n        </div>\n        <div className=\"steps\">\n          {this.renderSteps()}\n        </div>\n        <section className=\"tracks\">\n          {this.renderTracks()}\n        </section>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport Controller from './components/controller'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Controller />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}