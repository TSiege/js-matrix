(this["webpackJsonpjs-matrix"]=this["webpackJsonpjs-matrix"]||[]).push([[0],{690:function(e,t,a){e.exports=a(708)},704:function(e,t,a){},705:function(e,t,a){},706:function(e,t,a){},707:function(e,t,a){},708:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),s=a(530),l=a.n(s),i=a(19),c=a(0),o=a(2),u=a(3),p=a(4),f=a(5),v=a(54),b=a(1),h=a.n(b),m=a(6),g=(a(704),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).toggleOn=function(){var t=e.props;(0,t.toggleStepState)(t.step)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.isOn?"on":"";return r.a.createElement("button",{className:"step-button ".concat(this.props.playing," ").concat(e),onClick:this.toggleOn})}}]),a}(r.a.Component)),y=(a(705),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).toggleStepState=function(){var t=Object(m.a)(h.a.mark((function t(a){var n,r,s,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,r=n.sequence,s=n.pos,l=Object(i.a)(r),!l[a]&&e.playEffect(),e.props.toggleSequence(s,a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"playEffect",value:function(){var e=this.props,t=e.player,a=e.name;t.play(a)}},{key:"componentDidUpdate",value:function(e){Number.isInteger(e.step)&&e.isPlaying&&(this.props.sequence[e.step]&&this.playEffect())}},{key:"renderStepButtons",value:function(){for(var e=this.props,t=e.step,a=e.sequence,n=[],s=0;s<16;s++){var l=t===s?"playing":"";n.push(r.a.createElement(g,{key:s,step:s,isOn:a[s],playing:l,toggleStepState:this.toggleStepState}))}return n}},{key:"render",value:function(){return r.a.createElement("div",{className:"track"},r.a.createElement("h3",null,this.props.name),r.a.createElement("span",{className:"step-buttons"},this.renderStepButtons()))}}]),a}(r.a.Component));function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return 60/e*4/16*1e3}function E(e){return JSON.parse(JSON.stringify(e))}var d=["D5","C5","B4","A4","G4","F4","E4","D4","C4","B3","A3","G3","F3","E3","D3","C3"],w=[new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1)],C=a(17),B={C0:16.35,"C#0":17.32,Db0:17.32,D0:18.35,"D#0":19.45,Eb0:19.45,E0:20.6,F0:21.83,"F#0":23.12,Gb0:23.12,G0:24.5,"G#0":25.96,Ab0:25.96,A0:27.5,"A#0":29.14,Bb0:29.14,B0:30.87,C1:32.7,"C#1":34.65,Db1:34.65,D1:36.71,"D#1":38.89,Eb1:38.89,E1:41.2,F1:43.65,"F#1":46.25,Gb1:46.25,G1:49,"G#1":51.91,Ab1:51.91,A1:55,"A#1":58.27,Bb1:58.27,B1:61.74,C2:65.41,"C#2":69.3,Db2:69.3,D2:73.42,"D#2":77.78,Eb2:77.78,E2:82.41,F2:87.31,"F#2":92.5,Gb2:92.5,G2:98,"G#2":103.83,Ab2:103.83,A2:110,"A#2":116.54,Bb2:116.54,B2:123.47,C3:130.81,"C#3":138.59,Db3:138.59,D3:146.83,"D#3":155.56,Eb3:155.56,E3:164.81,F3:174.61,"F#3":185,Gb3:185,G3:196,"G#3":207.65,Ab3:207.65,A3:220,"A#3":233.08,Bb3:233.08,B3:246.94,C4:261.63,"C#4":277.18,Db4:277.18,D4:293.66,"D#4":311.13,Eb4:311.13,E4:329.63,F4:349.23,"F#4":369.99,Gb4:369.99,G4:392,"G#4":415.3,Ab4:415.3,A4:440,"A#4":466.16,Bb4:466.16,B4:493.88,C5:523.25,"C#5":554.37,Db5:554.37,D5:587.33,"D#5":622.25,Eb5:622.25,E5:659.26,F5:698.46,"F#5":739.99,Gb5:739.99,G5:783.99,"G#5":830.61,Ab5:830.61,A5:880,"A#5":932.33,Bb5:932.33,B5:987.77,C6:1046.5,"C#6":1108.73,Db6:1108.73,D6:1174.66,"D#6":1244.51,Eb6:1244.51,E6:1318.51,F6:1396.91,"F#6":1479.98,Gb6:1479.98,G6:1567.98,"G#6":1661.22,Ab6:1661.22,A6:1760,"A#6":1864.66,Bb6:1864.66,B6:1975.53,C7:2093,"C#7":2217.46,Db7:2217.46,D7:2349.32,"D#7":2489.02,Eb7:2489.02,E7:2637.02,F7:2793.83,"F#7":2959.96,Gb7:2959.96,G7:3135.96,"G#7":3322.44,Ab7:3322.44,A7:3520,"A#7":3729.31,Bb7:3729.31,B7:3951.07,C8:4186.01};function S(e){for(var t=e.hz,a=e.audioCtx,n=function(e){return 2*e*Math.PI}(t),r=a.createBuffer(1,44100,44100),s=r.getChannelData(0),l=0;l<44100;l++){var i=l/44100*n,c=Math.sin(i);s[l]=c}return r}function D(e){for(var t={},a=0,n=Object.entries(B);a<n.length;a++){var r=Object(C.a)(n[a],2),s=r[0],l=r[1];t[s]=S({hz:l,audioCtx:e})}return t}var G=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new v.AudioContext;Object(o.a)(this,e),this.audioCtx=t,this.buffersByTone=D(t)}return Object(u.a)(e,[{key:"play",value:function(e){var t=this.audioCtx,a=this.buffersByTone,n=t.createBufferSource(),r=t.createGain();r.gain.setTargetAtTime(0,t.currentTime,0),n.buffer=a[e],n.connect(r),r.connect(t.destination),n.start(),r.gain.setTargetAtTime(1,t.currentTime,.05),r.gain.setTargetAtTime(0,t.currentTime+.25,.125)}}]),e}(),O=(a(706),function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).interval=function(){var e=n.state.step;null===e||15===e?n.setState({step:0}):n.setState({step:e+1})},n.stop=function(){var e=n.state.interval;clearInterval(e),n.setState({interval:null,isPlaying:!1,step:null})},n.togglePlay=function(){var e=n.state,t=e.isPlaying,a=e.interval,r=e.bpm;if(t)clearInterval(a),n.setState({isPlaying:!1,interval:null});else{var s=setInterval(n.interval,A(r));n.setState({isPlaying:!0,interval:s})}},n.updateBpm=function(e){var t=e.target.value,a=n.state,r=a.interval,s=a.isPlaying;if(!isNaN(Number(t)))if(s){clearInterval(r);var l=setInterval(n.interval,A(t));n.setState({interval:l,bpm:t})}else n.setState({bpm:t})},n.selectSequence=function(e){n.setState(Object(c.a)({},E(w[e])))},n.toggleSequence=function(e,t){console.log({pos:e,i:t});var a=n.state.sequences[e],r=a[t];a[t]=!r,console.log({i:t,pos:e,step:r}),n.setState({sequences:n.state.sequences})};var r=new v.AudioContext,s=new G(r);return n.state={bpm:128,step:null,interval:null,isPlaying:!1,audioCtx:r,player:s,sequences:Object(i.a)(E(w))},n}return Object(u.a)(a,[{key:"renderPlayButton",value:function(){var e=this.state.isPlaying?r.a.createElement("svg",{width:"15",height:"15",id:"Capa_1",viewBox:"0 0 424.236 424.236",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{id:"path-1_5_",d:"m247.471 0h176.765v424.236h-176.765z",transform:"translate(9 2)"}),r.a.createElement("path",{id:"path-1_4_",d:"m0 0h176.765v424.236h-176.765z",transform:"translate(2 2)"})):r.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 494.942 494.942",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"m35.353 0 424.236 247.471-424.236 247.471z"}));return r.a.createElement("button",{className:"play",onClick:this.togglePlay},e)}},{key:"renderSteps",value:function(){for(var e=this.state.step,t=[],a=0;a<16;a++){var n=e===a?"playing":"";t.push(r.a.createElement("span",{key:a,className:"step ".concat(n)},a+1))}return t}},{key:"renderTracks",value:function(){var e=this,t=this.state,a=t.step,n=t.isPlaying,s=t.sequences,l=t.player;return s.map((function(t,s){var i=d[s];return r.a.createElement(y,{key:s,pos:s,name:i,step:a,player:l,isPlaying:n,sequence:t,toggleSequence:e.toggleSequence})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"controller"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",{className:"title"},"JS-Matrix"),r.a.createElement("span",{className:"toolbar"},r.a.createElement("button",{className:"stop",onClick:this.stop},r.a.createElement("svg",{width:"15",height:"15",id:"Layer_1",viewBox:"0 0 506.1 506.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"m489.609 0h-473.118c-9.108 0-16.491 7.383-16.491 16.491v473.118c0 9.107 7.383 16.491 16.491 16.491h473.119c9.107 0 16.49-7.383 16.49-16.491v-473.118c0-9.108-7.383-16.491-16.491-16.491z"}))),this.renderPlayButton())),r.a.createElement("div",{className:"steps"},this.renderSteps()),r.a.createElement("section",{className:"tracks"},this.renderTracks()))}}]),a}(r.a.Component));var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null))};a(707);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[690,1,2]]]);
//# sourceMappingURL=main.7f488772.chunk.js.map