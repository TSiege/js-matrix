(this["webpackJsonpjs-matrix"]=this["webpackJsonpjs-matrix"]||[]).push([[0],{14:function(e,t,n){e.exports=n(24)},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(11),i=n.n(s),l=n(9),c=n(13),o=n(1),u=n(2),p=n(3),f=n(4),v=n(5),h=n.n(v),b=n(8),m=(n(20),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).toggleOn=function(){var t=e.props;(0,t.toggleStepState)(t.step)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.isOn?"on":"";return r.a.createElement("button",{className:"step-button ".concat(this.props.playing," ").concat(e),onClick:this.toggleOn})}}]),n}(r.a.Component)),g=(n(21),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).toggleStepState=function(){var t=Object(b.a)(h.a.mark((function t(n){var a,r,s,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,r=a.sequence,s=a.pos,i=Object(l.a)(r),!i[n]&&e.playEffect(),e.props.toggleSequence(s,n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"playEffect",value:function(){var e=this.props,t=e.player,n=e.name;t.play(n)}},{key:"componentDidUpdate",value:function(e){Number.isInteger(e.step)&&e.isPlaying&&(this.props.sequence[e.step]&&this.playEffect())}},{key:"renderStepButtons",value:function(){for(var e=this.props,t=e.step,n=e.sequence,a=[],s=0;s<16;s++){var i=t===s?"playing":"";a.push(r.a.createElement(m,{key:s,step:s,isOn:n[s],playing:i,toggleStepState:this.toggleStepState}))}return a}},{key:"render",value:function(){return r.a.createElement("div",{className:"track"},r.a.createElement("h3",null,this.props.name),r.a.createElement("span",{className:"step-buttons"},this.renderStepButtons()))}}]),n}(r.a.Component));function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;return 60/e*4/16*1e3}function d(e){return JSON.parse(JSON.stringify(e))}var w=["C3","D3","E3","F3","G3","A3","B3","C4","D4","E4","F4","G4","A4","B4","C5","D5"],A=[new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1),new Array(16).fill(!1)],E=n(12),C={C0:16.35,"C#0":17.32,Db0:17.32,D0:18.35,"D#0":19.45,Eb0:19.45,E0:20.6,F0:21.83,"F#0":23.12,Gb0:23.12,G0:24.5,"G#0":25.96,Ab0:25.96,A0:27.5,"A#0":29.14,Bb0:29.14,B0:30.87,C1:32.7,"C#1":34.65,Db1:34.65,D1:36.71,"D#1":38.89,Eb1:38.89,E1:41.2,F1:43.65,"F#1":46.25,Gb1:46.25,G1:49,"G#1":51.91,Ab1:51.91,A1:55,"A#1":58.27,Bb1:58.27,B1:61.74,C2:65.41,"C#2":69.3,Db2:69.3,D2:73.42,"D#2":77.78,Eb2:77.78,E2:82.41,F2:87.31,"F#2":92.5,Gb2:92.5,G2:98,"G#2":103.83,Ab2:103.83,A2:110,"A#2":116.54,Bb2:116.54,B2:123.47,C3:130.81,"C#3":138.59,Db3:138.59,D3:146.83,"D#3":155.56,Eb3:155.56,E3:164.81,F3:174.61,"F#3":185,Gb3:185,G3:196,"G#3":207.65,Ab3:207.65,A3:220,"A#3":233.08,Bb3:233.08,B3:246.94,C4:261.63,"C#4":277.18,Db4:277.18,D4:293.66,"D#4":311.13,Eb4:311.13,E4:329.63,F4:349.23,"F#4":369.99,Gb4:369.99,G4:392,"G#4":415.3,Ab4:415.3,A4:440,"A#4":466.16,Bb4:466.16,B4:493.88,C5:523.25,"C#5":554.37,Db5:554.37,D5:587.33,"D#5":622.25,Eb5:622.25,E5:659.26,F5:698.46,"F#5":739.99,Gb5:739.99,G5:783.99,"G#5":830.61,Ab5:830.61,A5:880,"A#5":932.33,Bb5:932.33,B5:987.77,C6:1046.5,"C#6":1108.73,Db6:1108.73,D6:1174.66,"D#6":1244.51,Eb6:1244.51,E6:1318.51,F6:1396.91,"F#6":1479.98,Gb6:1479.98,G6:1567.98,"G#6":1661.22,Ab6:1661.22,A6:1760,"A#6":1864.66,Bb6:1864.66,B6:1975.53,C7:2093,"C#7":2217.46,Db7:2217.46,D7:2349.32,"D#7":2489.02,Eb7:2489.02,E7:2637.02,F7:2793.83,"F#7":2959.96,Gb7:2959.96,G7:3135.96,"G#7":3322.44,Ab7:3322.44,A7:3520,"A#7":3729.31,Bb7:3729.31,B7:3951.07,C8:4186.01};function B(){return(B=Object(b.a)(h.a.mark((function e(t){var n,a,r,s,i=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:new AudioContext,a=new Request(t),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.arrayBuffer();case 7:return s=e.sent,e.abrupt("return",n.decodeAudioData(s));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){for(var t=e.hz,n=e.audioCtx,a=function(e){return 2*e*Math.PI}(t),r=n.createBuffer(1,44100,44100),s=r.getChannelData(0),i=0;i<44100;i++){var l=i/44100*a,c=Math.sin(l);s[i]=c}return r}function D(e){for(var t={},n=0,a=Object.entries(C);n<a.length;n++){var r=Object(E.a)(a[n],2),s=r[0],i=r[1];t[s]=S({hz:i,audioCtx:e})}return t}var G=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new AudioContext;Object(o.a)(this,e),this.audioCtx=t,this.buffersByTone=D(t)}return Object(u.a)(e,[{key:"play",value:function(e){var t=this.audioCtx,n=this.buffersByTone,a=t.createBufferSource(),r=t.createGain();r.gain.setTargetAtTime(0,t.currentTime,0),a.buffer=n[e],a.connect(r),r.connect(t.destination),a.start(),r.gain.setTargetAtTime(1,t.currentTime,.05),r.gain.setTargetAtTime(0,t.currentTime+.25,.125)}}]),e}(),O=(n(22),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).interval=function(){var e=a.state.step;null===e||15===e?a.setState({step:0}):a.setState({step:e+1})},a.stop=function(){var e=a.state.interval;clearInterval(e),a.setState({interval:null,isPlaying:!1,step:null})},a.togglePlay=function(){var e=a.state,t=e.isPlaying,n=e.interval,r=e.bpm;if(t)clearInterval(n),a.setState({isPlaying:!1,interval:null});else{var s=setInterval(a.interval,y(r));a.setState({isPlaying:!0,interval:s})}},a.updateBpm=function(e){var t=e.target.value,n=a.state,r=n.interval,s=n.isPlaying;if(!isNaN(Number(t)))if(s){clearInterval(r);var i=setInterval(a.interval,y(t));a.setState({interval:i,bpm:t})}else a.setState({bpm:t})},a.selectSequence=function(e){a.setState(Object(c.a)({},d(A[e])))},a.toggleSequence=function(e,t){console.log({pos:e,i:t});var n=a.state.sequences[e],r=n[t];n[t]=!r,console.log({i:t,pos:e,step:r}),a.setState({sequences:a.state.sequences})};var r=new AudioContext,s=new G(r);return a.state={bpm:128,step:null,interval:null,isPlaying:!1,audioCtx:r,player:s,sequences:Object(l.a)(d(A))},a}return Object(u.a)(n,[{key:"renderPlayButton",value:function(){var e=this.state.isPlaying?r.a.createElement("svg",{width:"15",height:"15",id:"Capa_1",viewBox:"0 0 424.236 424.236",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{id:"path-1_5_",d:"m247.471 0h176.765v424.236h-176.765z",transform:"translate(9 2)"}),r.a.createElement("path",{id:"path-1_4_",d:"m0 0h176.765v424.236h-176.765z",transform:"translate(2 2)"})):r.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 494.942 494.942",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"m35.353 0 424.236 247.471-424.236 247.471z"}));return r.a.createElement("button",{className:"play",onClick:this.togglePlay},e)}},{key:"renderSteps",value:function(){for(var e=this.state.step,t=[],n=0;n<16;n++){var a=e===n?"playing":"";t.push(r.a.createElement("span",{key:n,className:"step ".concat(a)},n+1))}return t}},{key:"renderTracks",value:function(){var e=this,t=this.state,n=t.step,a=t.isPlaying,s=t.sequences,i=t.player;return s.map((function(t,s){var l=w[s];return r.a.createElement(g,{key:s,pos:s,name:l,step:n,player:i,isPlaying:a,sequence:t,toggleSequence:e.toggleSequence})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"controller"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",{className:"title"},"JS-808"),r.a.createElement("span",{className:"toolbar"},r.a.createElement("button",{className:"stop",onClick:this.stop},r.a.createElement("svg",{width:"15",height:"15",id:"Layer_1",viewBox:"0 0 506.1 506.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"m489.609 0h-473.118c-9.108 0-16.491 7.383-16.491 16.491v473.118c0 9.107 7.383 16.491 16.491 16.491h473.119c9.107 0 16.49-7.383 16.49-16.491v-473.118c0-9.108-7.383-16.491-16.491-16.491z"}))),this.renderPlayButton())),r.a.createElement("div",{className:"steps"},this.renderSteps()),r.a.createElement("section",{className:"tracks"},this.renderTracks()))}}]),n}(r.a.Component));var k=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null))};n(23);window.fetchAudioFile=function(e){return B.apply(this,arguments)},window.generateToneBuffer=S,window.generateToneBuffers=D,i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f39782ea.chunk.js.map